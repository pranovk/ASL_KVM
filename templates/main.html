<!DOCTYPE html>
{% if session['loggedin'] == True %}
<html>
<head>
    <title>ADMIN</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/ionicons/2.0.1/css/ionicons.min.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel="stylesheet" type="text/css" href="https://mdbootstrap.com/wp-content/themes/mdbootstrap4/css/mdb-plugins-gathered.min.css">
<style>
body {font-family: Arial, Helvetica, sans-serif;}
* {box-sizing: border-box;}

/* Button used to open the contact form - fixed at the bottom of the page */
.open-button {
  background-color:#29B3C9;
  color: white;
  padding: 16px 20px;
  border: none;
  border-radius:6px;
  cursor: pointer;
  opacity: 0.8;
  position:absolute;
  top: 17.5%;
  left: 250px;
  width: 280px;
  font-size:15px;
}
.branch-button{
 background-color: #555;
  color: white;
  padding: 16px 20px;
  border: none;
  border-radius:6px;
  cursor: pointer;
  opacity:1;
  width:135px;

}

/* The popup form - hidden by default */
.form-popup {
  display: none;
  position: absolute;
  top: 175px;
  left: 250px;
  width:500px;
  border-radius: 10px;
  border: 3px solid #f1f1f1;
  z-index: 9;
}
.form-popup1 {
  display: none;
  position: absolute;
  top: 175px;
  left: 250px;
  width: 280px;
  border-radius: 10px;
  border: 3px solid #f1f1f1;
  z-index: 9;
}
.iframe {
  display: none;
  position: fixed;
  top: 90px;
  width:910px;
  left: 250px;
  border-radius: 10px;
  border: 3px solid #f1f1f1;
  z-index: 9;
}

/* Add styles to the form container */
.form-container {
  max-width: 500px;
  padding: 10px;
  text-size:7px;
  text-align:centre;
  postion:absolute;
  background-color: white;
  font-size:17px;
}
.form-container1 {
  width: 900px;
  padding: 10px;
  text-size:17px;
  text-align:centre;
  background-color: white;
  font-size:17px;
}

/* Full-width input fields */
.form-container input[type=text], .form-container input[type=password] {
  width: 100%;
  padding: 15px;
  margin: 5px 0 22px 0;
  border: none;
  background: #f1f1f1;
}

/* When the inputs get focus, do something */
.form-container input[type=text]:focus, .form-container input[type=password]:focus {
  background-color: white;
  border:1px solid black;
  outline: none;
  font-size:17px;
}

/* Set a style for the submit/login button */
.form-container .btn {
  background-color: #4CAF50;
  color: white;
  padding: 6px 20px;
  border: none;
  cursor: pointer;
  width: 100%;
  height:30px;
  font-size:15px;
  margin-bottom:10px;
  opacity: 0.8;
}
.form-submit {
  text-align: right;
  padding-top: 27px; }

/* Add a red background color to the cancel button */
.form-container .cancel {
  background-color: red;
}




.topnav {
  overflow: hidden;



}

.nav a {
  float: right;
  color: #f2f2f2;
  text-align: center;
  padding: 14px 16px;
  text-decoration: none;
  font-size: 15px;
}

.nav a:hover {
  background-color: #ddd;
  color: black;
}

.nav a.active {
  background-color: #4CAF50;
  color: white;
}
/* Add some hover effects to buttons */
.form-container .btn:hover, .open-button:hover {
  opacity: 1;
}
table {
  font-family: arial, sans-serif;
  border-collapse: collapse;
  width: 70%;
  position:absolute;
  left:19.5%;
  top:25%;


}

td, th {
  border: 1px solid #dddddd;
  text-align: left;
  padding: 8px;


}
th{
  font-size:16px;
}


tr:nth-child(even) {
  background-color: #34495E  ;
  color:white;
}


body {
  /* Set "my-sec-counter" to 0 */
  counter-reset: my-sec-counter;
}
.dropdown {
  float:left;

  width:17.7%;
}

.dropdown .dropbtn {
  font-size: 16px;
  border:1px solid white;
  width:100%;
  outline: none;
  color: white;
  padding: 14px 16px;
  background-color: inherit;
  font-family: inherit;
  margin: 0;

}
.dropdown-content {
  display: none;
  position: absolute;
  background-color: #f9f9f9;
  min-width: 100%;
  box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
  z-index: 1;
}

.dropdown-content a {
  float: none;
  color: black;
  padding: 12px 16px;
  text-decoration: none;
  display: block;
  text-align: left;
}

.dropdown-content a:hover {
  background-color: #ddd;
}

.dropdown:hover .dropdown-content {
  display: block;
}
.map-container{
overflow:hidden;
padding-bottom:56.25%;
position:relative;
height:0;
}
.map-container iframe{
left:0;
top:0;
height:100%;
width:100%;
position:absolute;
}
</style>
    <style type="text/css">/* Chart.js */
@-webkit-keyframes chartjs-render-animation{from{opacity:0.99}to{opacity:1}}@keyframes chartjs-render-animation{from{opacity:0.99}to{opacity:1}}.chartjs-render-monitor{-webkit-animation:chartjs-render-animation 0.001s;animation:chartjs-render-animation 0.001s;}
</style>
</head>
<body>

<nav class="navbar " style="  opacity:0.8; background-color:#29B3C9; " >
  <div class="container-fluid">
    <div class="navbar-header" >
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#myNavbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="#"></a>
    </div>
        <div class="nav navbar-nav navbar-right" >
            <a href="{{ url_for('login') }}" style="color:white;font-size:17px"><span class="glyphicon glyphicon-log-out"></span>Logout</a>
        <a href="#" style="color:white;font-size:17px"><span class="glyphicon glyphicon-user"></span>Admin</a>

      </div>
    <div class="collapse navbar-collapse" id="myNavbar">

    </div>
  </div>
</nav>

<button class="open-button" onclick="openForm()">Create User</button>

<div class="form-popup" id="myForm">
  <form method="post" class="form-container" >
    <h3>Create User</h3>

    <label id="username"><b>Username</b></label>
    <input type="text" placeholder="Enter Username" name="user" required>
      <label id="email1"><b>Email</b></label>
    <input type="text" placeholder="Enter Email" name="email1" required>

    <label id="psw"><b>Password</b></label>
    <input type="password" placeholder="Enter Password" name="psw" required>

      <label for="Branch"><b>Branchs:</b></label><br>
      {% for items in Checkbox %}
      <label for="{{items[1]}}" style="padding:0px 0px 0px 15px"><h5>{{items[1]}}</h5></label>
      <input type="checkbox" id="Branch" name="check" value="{{items[1]}}">
      {% endfor %}
      <br><br>
      <label id='kvm'><b>KVM_Switch:</b></label>
      <br>
      <h6><label id="KVM_u">Username</label>
    <input type="text" placeholder="Enter Username" style="width:160px; height:10px;border-radius:4px" name="KVM_u" required>
      <label id="KVM_p">Password</label>
    <input type="password" placeholder="Enter Password" style="width:160px; height:10px;border-radius:4px" name="KVM_p" required></h6>
      <label id='Camera'><b>Camera:</b></label>
      <br>
      <h6><label id="Camera_u">Username</label>
    <input type="text" placeholder="Enter Username" style="width:160px; height:10px;border-radius:4px" name="Camera_u" required>
     <label id="Camera_p">Password</label>
    <input type="password" placeholder="Enter Password" style="width:160px; height:10px;border-radius:4px" name="Camera_p" required></h6>
<br>
      <label id="Address"><B>Address</B></label>
    <input type="text" placeholder="Enter Address" name="Address">
      <br>
      <button type="submit"  class="btn" >Submit</button>
    <button type="button" class="btn cancel" onclick="closeForm()">Close</button>
  </form>
</div>
    <div class="form-popup" id="myForm2">
  <form method="post" class="form-container" >
    <h3>Update User</h3>
      <br>

    <label id="username2"><b>Username</b></label>
    <input type="text" placeholder="Enter Username" id="user2" name="user2" required>
      <label id="email"><b>Email</b></label>
    <input type="text" placeholder="Enter Email" name="email" required>

    <label id="psw2"><b>Password</b></label>
    <input type="password" placeholder="Enter Password" name="psw2" required>
      <label for="Branchs"><b>Branchs:</b></label><br>
      {% for items in Checkbox %}
      <label for="{{items[1]}}" style="padding:0px 0px 0px 15px"><h5>{{items[1]}}</h5></label>
      <input type="checkbox" id="Branchs" name="check" value="{{items[1]}}">
      {% endfor %}
      <br><br>
      <label id='kvm2'><b>KVM_Switch:</b></label>
      <br>
      <h6><label id="KVM_u2">Username</label>
    <input type="text" placeholder="Enter Username" style="width:160px; height:10px;border-radius:4px" name="KVM_u2" required>
      <label id="KVM_p2">Password</label>
    <input type="password" placeholder="Enter Password" style="width:160px; height:10px;border-radius:4px" name="KVM_p2" required></h6>
      <label id='Camera2'><b>Camera:</b></label>
      <br>
      <h6><label id="Camera_u2">Username</label>
    <input type="text" placeholder="Enter Username" style="width:160px; height:10px;border-radius:4px" name="Camera_u2" required>
      <label id="Camera_p2">Password</label>
    <input type="password" placeholder="Enter Password" style="width:160px; height:10px;border-radius:4px" name="Camera_p2" required></h6>
<br>
      <label id="Address2"><B>Address</B></label>
    <input type="text" placeholder="Enter Address" name="Address2">
      <br>
      <button type="submit"  class="btn" >Submit</button>
    <button type="button" class="btn cancel" onclick="closeForm3()">Close</button>
  </form>
</div>




<div class="row">
    <div class="col-3" style="background-color:#555;height:200%;width:17%;position:absolute;top:53px">
<div class="container" style="text-align:center;">
  <div class="dropdown">
    <button class="dropbtn">Branches</button>
    <div class="dropdown-content">
        <a href="{{ url_for('Branch') }}" data-toggle="modal" data-target="#branch">Create Branch</a>
        <a href="{{ url_for('view_branch') }}" data-toggle="modal" data-target="#branch">View Branch</a>
        <a href="{{ url_for('main') }}" data-toggle="modal" data-target="#branch">View Users</a>
    </div>
  </div>
</div>

    </div>
</div>

<form method="post">
<table id="myTable">
  <tr >
      <th style="font-size:16px">Users</th>
      <th style="font-size:16px">Email</th>
      <th style="font-size:16px">Branchs</th>
      <th style="font-size:16px">Update</th>
  </tr>
  {% for item in data %}

<tr id="{{item[0]}}">
    <td style="font-size:14px">{{item[1]}}</td>
    <td style="font-size:14px">{{item[3]}}</td>
    <td style="font-size:14px">{{item[4]}}</td>
    <td style="font-size:14px"><a type="button" onclick="reply_click(this.id)"  id="{{item[1]}}" >Edit</a></td>
</tr>
    {% endfor %}
</table>
</form>
{% for items in branchs %}
<div class="iframe" id="{{items[1]}}">
  <form method="post" class="form-container1" >
      <iframe id='iframe' height="500px" width="100%" style='border:2px' src="/{{items[1]}}" name="iframe_a"></iframe>

    <button type="button" class="btn cancel" style="" onclick="close{{items[1]}}()" >Close</button>
  </form>
</div>
{% endfor %}

<form method="post" target="votar">
    <input type="text" id="id" name="id"  style="display:none">
    <button type="submit" id="second" name="action" style="display:none">button</button>
    <button type="submit" id="action2" name="action2" style="display:none">button</button>
    </form>

<iframe name="votar" style="display:none;"></iframe>

<script>
function openForm() {
  document.getElementById("myForm").style.display = "block";
  document.getElementById("action").click();
}
function openForm1() {
  document.getElementById("myForm").style.display = "block";
}

function closeForm3() {
  document.getElementById("myForm2").style.display = "none";
}

function closeForm() {
  document.getElementById("myForm").style.display = "none";
  document.getElementById("myForm1").style.display = "none";
  document.getElementById("myForm2").style.display = "none";
  document.getElementById("myForm3").style.display = "none";
}
function iframe() {
  document.getElementById("iframe").style.display = "block";
}
</script>
<script>
   {% for items in branchs %}
function {{items[1]}}() {
  document.getElementById("{{items[1]}}").style.display = "block";
}
{% endfor %}
   {% for items in branchs %}
function close{{items[1]}}() {
  document.getElementById("{{items[1]}}").style.display = "none";
}
{% endfor %}
</script>
<script>
function myFunction() {
  var table = document.getElementById("myTable");
  var row = table.insertRow(1);
  var cell1 = row.insertCell(0);
  var cell2 = row.insertCell(1);
  var cell3 = row.insertCell(2);
  var cell4 = row.insertCell(3);
  var cell5 = row.insertCell(4);
  cell1.innerHTML = "{{username}}";
  cell2.innerHTML = "{{branchname1}}";
  cell3.innerHTML = "{{branchname2}}";
  cell4.innerHTML = "-";
  cell5.innerHTML = "-";
}
</script>
<script>
 function reply_click(clicked_id)
  {
  document.getElementById("myForm2").style.display = "block";
  document.getElementById("user2").value = clicked_id ;
  document.getElementById("id").value = clicked_id ;
  document.getElementById("second").click();
  }
</script>

</body>
</html>
{% endif %}